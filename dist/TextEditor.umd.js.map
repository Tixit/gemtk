{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fe69c3a3c5d8bd2c7946","webpack:///./TextEditor.js","webpack:///external \"proto\"","webpack:///./node_modules/keysight/keysight.js","webpack:///external \"Gem\"","webpack:///external \"Style\"","webpack:///external \"Text\""],"names":[],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AC7DA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;;AAEA,0BAA0B,0BAA0B;;AAEpD;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA,yBAAyB,4BAA4B;AACrD,8BAA8B;AAC9B,KAAK;AACL;AACA,yBAAyB,qCAAqC;AAC9D,8BAA8B;AAC9B,KAAK;AACL,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;;;;;;;;;;;;ACnJA,+C;;;;;;;;;;;;ACCA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,WAAW;AACX,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxOA,+C;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,+C","file":"TextEditor.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"proto\"), require(\"Gem\"), require(\"Style\"), require(\"Text\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"proto\", \"Gem\", \"Style\", \"Text\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TextEditor\"] = factory(require(\"proto\"), require(\"Gem\"), require(\"Style\"), require(\"Text\"));\n\telse\n\t\troot[\"TextEditor\"] = factory(root[\"proto\"], root[\"Gem\"], root[\"Style\"], root[\"Text\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fe69c3a3c5d8bd2c7946","var proto = require('proto')\r\nvar ks = require(\"keysight\")\r\n\r\nvar Gem = require('gem');\r\nvar Style = require(\"gem/Style\")\r\nvar Text = require(\"gem/Text\")\r\n\r\nmodule.exports = proto(Gem, function(superclass) {\r\n    this.name = 'TextEditor'\r\n\r\n    this.defaultStyle = Style({\r\n        Text: {\r\n            minWidth: 100,\r\n            wordBreak: 'break-word'\r\n        },\r\n        $emptyText: {\r\n            $inherit: true,\r\n            position: 'absolute', //top: 4, left: 4,\r\n            pointerEvents:'none',\r\n            color: 'rgb(190,190,190)'\r\n        }\r\n    })\r\n\r\n    // label - A label to put on the component (for styling)\r\n    // options can contain:\r\n        // characterFilter - A function that's passed a character from the 'keydown' event, and should return true if the character is allowable\r\n        // emptyText - Text to be displayed when the field is undefined\r\n        // initial - The initial value\r\n        // proxyEvents - A list of events to proxy. Defaults to ['blur', 'focus']\r\n    this.build = function(/*[label,] options*/) {\r\n        if(arguments[0] instanceof Object) {\r\n            var options = arguments[0]\r\n        } else if(arguments[0] !== undefined) {\r\n            var label = arguments[0]\r\n            var options = arguments[1]\r\n        }\r\n\r\n        if(options === undefined) options = {}\r\n        if(options.emptyText === undefined) options.emptyText = ''\r\n\r\n        var that = this\r\n\r\n        if(label) this.label = label\r\n        if(options.emptyText) {\r\n            this.emptyText = Text('emptyText', options.emptyText)\r\n            this.add(this.emptyText)\r\n        }\r\n\r\n        var text = this.textField = Text()\r\n        text.attr(\"contenteditable\", true)\r\n        this.add(text)  // there's a reason this is wrapped in a container.. but i can't remember why\r\n        if(options.initial !== undefined)\r\n            this.text = options.initial\r\n\r\n        if(options.characterFilter !== undefined) {\r\n            this.on('keypress', function(event) {\r\n                if(!options.characterFilter(ks(event).char)) {\r\n                    event.preventDefault()\r\n                }\r\n            })\r\n            this.on('paste', function(event) { // keypress doesn't seem to get paste events\r\n                var types = event.clipboardData.types\r\n                var pastedText = event.clipboardData.getData(types[0])\r\n                for(var n in pastedText) {\r\n                    if(!options.characterFilter(pastedText[n])) {\r\n                        event.preventDefault()\r\n                        break;\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        if(options.proxyEvents === undefined) {\r\n            options.proxyEvents = ['blur', 'focus']\r\n        }\r\n\r\n        this.proxy(text, {only: options.proxyEvents})\r\n\r\n        text.on('input', function() {\r\n            that.renderEmptyText()\r\n        })\r\n        onceAfterCooldown(text, 'input', 200, function(event) {\r\n            that.emit('change') // since contenteditable divs don't seem to emit change events\r\n        })\r\n    }\r\n\r\n    this.renderEmptyText = function() {\r\n        if(this.emptyText)\r\n            this.emptyText.visible = this.empty\r\n    }\r\n\r\n    Object.defineProperty(this, 'text', {\r\n        get: function() {\r\n            var innerText = this.textField.domNode.innerText  // using innerText here because it preserves newlines\r\n\r\n            // for some weird reason, two newlines are created in a contenteditable node when you press enter, and\r\n            // so backspacing will only get rid of one and the result is that it looks empty but still has a single newline in it - ugh\r\n            if(innerText[innerText.length-1] === '\\n')\r\n                innerText = innerText.slice(0,-1)\r\n            return innerText\r\n        },\r\n        set: function(value) {\r\n            if(value === undefined || value === '') {\r\n                this.textField.text = ''\r\n                if(this.emptyText)\r\n                    this.emptyText.visible = true\r\n            } else {\r\n                this.textField.text = value\r\n                if(this.emptyText)\r\n                    this.emptyText.visible = false\r\n            }\r\n        }\r\n    })\r\n\r\n    Object.defineProperty(this, 'val', {\r\n        get: function() {\r\n            return this.text\r\n        },\r\n        set: function(value) {\r\n            this.text = value\r\n        }\r\n    })\r\n\r\n    Object.defineProperty(this, 'focus', {\r\n        get: function() {return this.textField.focus},\r\n        set: function(value) {this.textField.focus = value}\r\n    })\r\n    Object.defineProperty(this, 'selectionRange', {\r\n        get: function() {return this.textField.selectionRange},\r\n        set: function(value) {this.textField.selectionRange = value}\r\n    })\r\n})\r\n\r\n\r\n// only fires the callback after a cooldown time has passed\r\n// returns the event callback (so you can off it)\r\nfunction onceAfterCooldown(gem, event, cooldownTime, callback) {\r\n    var timeout, cb;\r\n    gem.on(event, cb=function() {\r\n        var args = arguments\r\n        if(timeout) clearTimeout(timeout)\r\n        timeout = setTimeout(function() { // only run new search when you stop typing\r\n            timeout = undefined\r\n            callback.apply(gem, args)\r\n        },cooldownTime)\r\n    })\r\n    return cb\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./TextEditor.js\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"proto\"\n// module id = 1\n// module chunks = 0","\r\nvar keycodeShiftedKeys = {\r\n    \"/\": \"?\",\r\n    \".\": \">\",\r\n    \",\": \"<\",\r\n    \"\\'\": \"\\\"\",\r\n    \";\": \":\",\r\n    \"[\": \"{\",\r\n    \"]\": \"}\",\r\n    \"\\\\\": \"|\",\r\n    \"`\": \"~\",\r\n    \"=\": \"+\",\r\n    \"-\": \"_\",\r\n    \"1\": \"!\",\r\n    \"2\": \"@\",\r\n    \"3\": \"#\",\r\n    \"4\": \"$\",\r\n    \"5\": \"%\",\r\n    \"6\": \"^\",\r\n    \"7\": \"&\",\r\n    \"8\": \"*\",\r\n    \"9\": \"(\",\r\n    \"0\": \")\"\r\n};\r\n\r\nvar keyCodeUnshiftedKeys = {}\r\nfor(var x in keycodeShiftedKeys) {\r\n    var shiftedKey = keycodeShiftedKeys[x]\r\n    keyCodeUnshiftedKeys[shiftedKey] = x\r\n}\r\n\r\nvar keydownKeycodeDictionary = {\r\n    0: \"\\\\\",\r\n\r\n    8: \"\\b\",\r\n    9: \"\\t\",\r\n\r\n    12: \"num\",\r\n    13: \"\\n\",\r\n\r\n    16: \"shift\",\r\n    17: \"meta\",  // 'ctrl' on windows, 'cmd' on mac\r\n    18: \"alt\",   // aka 'option'\r\n    19: \"pause\", // or sometimes 'break'?\r\n    20: \"caps\",\r\n\r\n    27: \"esc\",\r\n\r\n    32: \" \",\r\n    33: \"pageup\",\r\n    34: \"pagedown\",\r\n    35: \"end\",\r\n    36: \"home\",\r\n    37: \"left\",\r\n    38: \"up\",\r\n    39: \"right\",\r\n    40: \"down\",\r\n\r\n    44: \"print\",\r\n    45: \"insert\",\r\n    46: \"delete\",\r\n\r\n    // 48-90\r\n\r\n//    48: \"0\",\r\n//    49: \"1\",\r\n//    50: \"2\",\r\n//    51: \"3\",\r\n//    52: \"4\",\r\n//    53: \"5\",\r\n//    54: \"6\",\r\n//    55: \"7\",\r\n//    56: \"8\",\r\n//    57: \"9\",\r\n//\r\n//    59: \";\",\r\n//\r\n//    61: \"=\",\r\n//\r\n//    65: \"a\",\r\n//    66: \"b\",\r\n//    67: \"c\",\r\n//    68: \"d\",\r\n//    69: \"e\",\r\n//    70: \"f\",\r\n//    71: \"g\",\r\n//    72: \"h\",\r\n//    73: \"i\",\r\n//    74: \"j\",\r\n//    75: \"k\",\r\n//    76: \"l\",\r\n//    77: \"m\",\r\n//    78: \"n\",\r\n//    79: \"o\",\r\n//    80: \"p\",\r\n//    81: \"q\",\r\n//    82: \"r\",\r\n//    83: \"s\",\r\n//    84: \"t\",\r\n//    85: \"u\",\r\n//    86: \"v\",\r\n//    87: \"w\",\r\n//    88: \"x\",\r\n//    89: \"y\",\r\n//    90: \"z\",\r\n    91: \"cmd\",   // 'left window key'\r\n    92: \"cmd\",   // 'right window key'\r\n    93: \"cmd\",   // 'select key'\r\n\r\n    96: \"num0\",\r\n    97: \"num1\",\r\n    98: \"num2\",\r\n    99: \"num3\",\r\n    100: \"num4\",\r\n    101: \"num5\",\r\n    102: \"num6\",\r\n    103: \"num7\",\r\n    104: \"num8\",\r\n    105: \"num9\",\r\n    106: \"*\",\r\n    107: \"+\",\r\n    108: \"num_enter\",\r\n    109: \"num_subtract\",\r\n    110: \"num_decimal\",\r\n    111: \"num_divide\",\r\n    112: \"f1\",\r\n    113: \"f2\",\r\n    114: \"f3\",\r\n    115: \"f4\",\r\n    116: \"f5\",\r\n    117: \"f6\",\r\n    118: \"f7\",\r\n    119: \"f8\",\r\n    120: \"f9\",\r\n    121: \"f10\",\r\n    122: \"f11\",\r\n    123: \"f12\",\r\n    124: \"print\",\r\n\r\n    144: \"num\",    // num lock\r\n    145: \"scroll\", // scroll lock\r\n\r\n    173: \"-\",\r\n\r\n    186: \";\",\r\n    187: \"=\",\r\n    188: \",\",\r\n    189: \"-\",\r\n    190: \".\",\r\n    191: \"/\",\r\n    192: \"`\",\r\n    219: \"[\",\r\n    220: \"\\\\\",\r\n    221: \"]\",\r\n    222: \"\\'\",\r\n    223: \"`\",\r\n    224: \"cmd\",\r\n    225: \"alt\",\r\n\r\n    57392: \"ctrl\",\r\n    63289: \"num\"\r\n};\r\n\r\nvar keydownKeycodeReverseDictionary = {}\r\nfor(var x in keydownKeycodeDictionary) {\r\n    var name = keydownKeycodeDictionary[x]\r\n    keydownKeycodeReverseDictionary[name] = x\r\n}\r\n\r\nvar keypressCharacterMap = {\r\n    '\\r':'\\n'\r\n}\r\nvar keydownCharacterMap = {\r\n    num_subtract: '-',\r\n    num_enter: '\\n',\r\n    num_decimal: '.',\r\n    num_divide: '/'\r\n\r\n}\r\n\r\nfunction getKeypressKeycodeValue(charcode) {\r\n    var character = String.fromCharCode(charcode)\r\n    if(character in keyCodeUnshiftedKeys) {\r\n        return keyCodeUnshiftedKeys[character]\r\n    } else if(character in keypressCharacterMap) {\r\n        return keypressCharacterMap[character]\r\n    } else {\r\n        return character.toLowerCase()\r\n    }\r\n}\r\n\r\n\r\nmodule.exports = function(event) {\r\n    if(event.type === 'keypress') {\r\n        var key = getKeypressKeycodeValue(event.charCode)\r\n    } else {\r\n        if(event.keyCode !== undefined) {\r\n            if(event.keyCode in keydownKeycodeDictionary) {\r\n                var key = keydownKeycodeDictionary[event.keyCode]\r\n            } else {\r\n                var key = String.fromCharCode(event.keyCode).toLowerCase() // fall back to this in case the explicit map above doesn't cover something\r\n            }\r\n        } else if(event.charCode === 0) {\r\n            var key = '\\n'\r\n        }\r\n    }\r\n\r\n    if(event.shiftKey && key in keycodeShiftedKeys) {\r\n        var char = keycodeShiftedKeys[key]\r\n    } else if(event.shiftKey && !(key in keydownKeycodeReverseDictionary)) {\r\n        var char = key.toUpperCase() // fallback\r\n    } else if(key in keydownCharacterMap) {\r\n        var char = keydownCharacterMap[key]\r\n    } else {\r\n        var char = key\r\n    }\r\n\r\n\r\n\r\n    return {\r\n        char: char,\r\n        key: key\r\n    }\r\n}\r\n\r\nmodule.exports.unprintableKeys = {\r\n    \"\\b\":1,\"num\":1,\"shift\":1,\"meta\":1,\"alt\":1,\"pause\":1,\"caps\":1,\"esc\":1,\r\n    \"pageup\":1,\"pagedown\":1,\"end\":1,\"home\":1,\r\n    \"left\":1,\"up\":1,\"right\":1,\"down\":1,\r\n    \"print\":1,\"insert\":1,\"delete\":1,\"cmd\":1,\r\n    \"f1\":1,\"f2\":1,\"f3\":1,\"f4\":1,\"f5\":1,\"f6\":1,\"f7\":1,\"f8\":1,\"f9\":1,\"f10\":1,\"f11\":1,\"f12\":1,\r\n    \"scroll\":1,\"ctrl\":1,\r\n}\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/keysight/keysight.js\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Gem\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Style\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Text\"\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}